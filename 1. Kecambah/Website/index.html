<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SEED TESTING</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_forward"
    />
    <script
      src="https://kit.fontawesome.com/953dcd0d0e.js"
      crossorigin="anonymous"
    ></script>
    <link rel="icon" href="image/download.png" />
  </head>
  <body>
    <div id="header">
      <div class="container">
        <nav>
          <a class="navbar-brand">SEED</a>
          <ul id="submenu">
            <li><a href="#body" onclick="scrollToTop()">Home</a></li>
            <li><a href="#services">Research</a></li>
            <li><a href="#main">Comunity Service</a></li>
            <li><a href="#Poto">Activites</a></li>
            <li><a href="baca.html">Seed Test</a></li>
            <li><a href="#contact">Contact</a></li>
            <i class="fa-solid fa-x" onclick="closemenu()"></i>
          </ul>
          <i class="fa-solid fa-bars" onclick="openmenu()"></i>
        </nav>
        <div class="header-text">
          <img class="Profil" src="image/blank.jpg" alt="" />
          <div class="text-container">
            <p class="nama">Researcher</p>
          </div>
          <p class="description">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Iure, vel,
            praesentium dolor voluptate quaerat provident assumenda, quos totam
            aperiam tempora iste excepturi magni? Perspiciatis illum delectus, a
            dicta recusandae odio.
          </p>
          <hr class="line" />
          <canvas class="graphic" id="myChart"></canvas>
          <!-- Menghubungkan Chart.js dan JavaScript -->
          <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
          <div class="bar">
            <svg width="200" height="200">
              <circle cx="100" cy="100" r="80" class="track" />
              <circle
                cx="100"
                cy="100"
                r="80"
                class="progress"
                id="progressBar"
              />
            </svg>
          </div>
          <div class="kanan">
            <p class="alat">
              <span class="judul">SEED TESTING</span> <br />Lorem ipsum dolor
              sit amet consectetur adipisicing elit. Voluptatum dolores quas
              commodi minima officia repellat id doloremque perferendis delectus
              quam temporibus porro est, tempora, labore vero consequuntur,
              asperiores omnis esse.
            </p>
          </div>
        </div>
      </div>
    </div>
    <div id="services">
      <div class="container">
        <div class="services-title">
          <p class="nama">Current Research & Scientific Publication</p>
        </div>
        <div class="services-list">
          <div>
            <i class="fa-solid fa-dna"></i>
            <h2>Research 1</h2>
            <p style="text-align: justify">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque id
              eum officiis ipsam impedit cupiditate, fuga voluptatem incidunt
              quidem libero eveniet, necessitatibus provident quas doloribus
              voluptas iste aperiam ratione autem!
            </p>
            <a href="#">Learn More</a>
          </div>
          <div>
            <i class="fa-solid fa-dna"></i>
            <h2>Research 2</h2>
            <p style="text-align: justify">
              Lorem ipsum dolor sit amet consectetur, adipisicing elit. Cumque
              eligendi quae culpa, deleniti quaerat tempora corrupti, ipsam
              ducimus voluptates a placeat dignissimos necessitatibus, non
              nesciunt! Veniam labore nisi fuga beatae.
            </p>
            <a href="#">Learn More</a>
          </div>
          <div>
            <i class="fa fa-book" aria-hidden="true"></i>
            <h2>Publication 1</h2>
            <p style="text-align: justify">
              Lorem ipsum dolor sit amet consectetur adipisicing elit.
              Laboriosam aperiam, quidem expedita ducimus, veritatis minima
              veniam incidunt dolor perferendis dignissimos maiores laborum
              excepturi eaque debitis ab fuga ullam voluptatem illum!
            </p>
            <a href="#">Learn More</a>
          </div>
          <div>
            <i class="fa fa-book" aria-hidden="true"></i>
            <h2>Publication 2</h2>
            <p style="text-align: justify">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos
              consectetur at in, facilis ducimus corrupti velit voluptate odit
              ratione ipsam veritatis minus vel similique tempore quia ipsa rem
              voluptatum incidunt.
            </p>
            <a href="#">Learn More</a>
          </div>
        </div>
      </div>
    </div>
    <div id="main">
      <h3 class="community-title">Comunity Services</h3>
      <div class="tempat swiper">
        <div class="card-wrapper">
          <ul class="card-list swiper-wrapper">
            <li class="card-item swiper-slide">
              <a href="#" class="card-link">
                <img
                  src="image/man-gad95017ae_640.jpg"
                  alt="Card Image"
                  class="card-image"
                />
                <p class="badge">Project 1</p>
                <h2 class="card-title">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Soluta voluptatum eligendi nostrum autem, quo atque placeat
                  recusandae explicabo praesentium labore quae delectus
                  repellendus sequi quidem, quisquam suscipit cupiditate minus
                  officia!
                </h2>
                <button class="card-button material-symbols-rounded">
                  arrow_forward
                </button>
              </a>
            </li>
            <li class="card-item swiper-slide">
              <a href="#" class="card-link">
                <img
                  src="image/IMG_0714.jpg"
                  alt="Card Image"
                  class="card-image"
                />
                <p class="badge-2">Project 2</p>
                <h2 class="card-title">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Soluta voluptatum eligendi nostrum autem, quo atque placeat
                  recusandae explicabo praesentium labore quae delectus
                  repellendus sequi quidem, quisquam suscipit cupiditate minus
                  officia!
                </h2>
                <button class="card-button material-symbols-rounded">
                  arrow_forward
                </button>
              </a>
            </li>
            <li class="card-item swiper-slide">
              <a href="#" class="card-link">
                <img
                  src="image/istockphoto-612386780-170667a.jpg"
                  alt="Card Image"
                  class="card-image"
                />
                <p class="badge-3">Report 1</p>
                <h2 class="card-title">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Soluta voluptatum eligendi nostrum autem, quo atque placeat
                  recusandae explicabo praesentium labore quae delectus
                  repellendus sequi quidem, quisquam suscipit cupiditate minus
                  officia!
                </h2>
                <button class="card-button material-symbols-rounded">
                  arrow_forward
                </button>
              </a>
            </li>
            <li class="card-item swiper-slide">
              <a href="#" class="card-link">
                <img
                  src="image/pexels-fauxels-3184317-e8635462f0371f6841bdaed001cda056-28728ec12dbfa9bdf1e8af53dd6fd2c7_600x400.jpg"
                  alt="Card Image"
                  class="card-image"
                />
                <p class="badge-4">Report 2</p>
                <h2 class="card-title">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Soluta voluptatum eligendi nostrum autem, quo atque placeat
                  recusandae explicabo praesentium labore quae delectus
                  repellendus sequi quidem, quisquam suscipit cupiditate minus
                  officia!
                </h2>
                <button class="card-button material-symbols-rounded">
                  arrow_forward
                </button>
              </a>
            </li>
          </ul>
          <div class="swiper-pagination"></div>
          <div class="swipper-slide-button swiper-button-prev"></div>
          <div class="swipper-slide-button swiper-button-next"></div>
        </div>
      </div>
    </div>
    <div id="Poto">
      <h1 class="cssgrid">Activites</h1>
      <div class="container2">
        <div class="gallery-container w-3 h-2">
          <div class="gallery-item">
            <div class="image">
              <img src="image/man-gad95017ae_640.jpg" alt="nature" />
            </div>
            <div class="text">Activity 1</div>
          </div>
        </div>

        <div class="gallery-container w-3 h-3">
          <div class="gallery-item">
            <div class="image">
              <img src="image/istockphoto-612386780-170667a.jpg" alt="people" />
            </div>
            <div class="text">Activity 2</div>
          </div>
        </div>

        <div class="gallery-container h-2">
          <div class="gallery-item">
            <div class="image">
              <img
                src="image/pexels-fauxels-3184317-e8635462f0371f6841bdaed001cda056-28728ec12dbfa9bdf1e8af53dd6fd2c7_600x400.jpg"
                alt="sport"
              />
            </div>
            <div class="text">Activity 3</div>
          </div>
        </div>

        <div class="gallery-container w-2">
          <div class="gallery-item">
            <div class="image">
              <img
                src="image/38dee261426e7bd24c54606f79ccfd19.jpg"
                alt="fitness"
              />
            </div>
            <div class="text">Activity 4</div>
          </div>
        </div>

        <div class="gallery-container w-4 h-1">
          <div class="gallery-item">
            <div class="image">
              <img src="image/IMG_0714.jpg" alt="food" />
            </div>
            <div class="text">Activity 5</div>
          </div>
        </div>

        <div class="gallery-container">
          <div class="gallery-item">
            <div class="image">
              <img src="image/blank-removebg-preview.png" alt="travel" />
            </div>
            <div class="text">Activity 6</div>
          </div>
        </div>
      </div>
    </div>
    <div id="contact">
      <div class="container">
        <div class="row">
          <div class="contactLeft">
            <h1 class="contactme">Contact Me</h1>
            <p class="gmail">
              <i class="fa fa-at" aria-hidden="true"></i> example@gmail.com
            </p>
            <p class="phone">
              <i class="fa-solid fa-phone"></i> +62-XXXX-XXXX-XXXX
            </p>
            <div class="social">
              <a href="#"><i class="fa-brands fa-instagram"></i></a>
              <a href="#"><i class="fa-brands fa-linkedin"></i></a>
            </div>
            <a href="#" download class="btn btn2">Download CV</a>
          </div>
          <div class="contactRight">
            <form name="submit-to-google-sheet">
              <input type="text" name="Name" placeholder="Your Name" required />
              <input
                type="email"
                name="Email"
                placeholder="Your Email"
                required
              />
              <textarea
                name="Message"
                rows="6"
                placeholder="Your Message"
              ></textarea>
              <button type="submit" class="btn btn2">Submit</button>
              <div
                class="modal fade"
                id="exampleModal"
                tabindex="-1"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">
                        Message Sent
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      Your message has been sent successfully!
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        Close
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </form>
            <span id="msg"> </span>
          </div>
        </div>
      </div>
    </div>
    <script>
      // Inisialisasi Chart.js untuk suhu
      const ctxTemperature = document
        .getElementById("temperatureChart")
        .getContext("2d");
      const temperatureChart = new Chart(ctxTemperature, {
        type: "line",
        data: {
          labels: [], // Waktu akan ditambahkan secara dinamis
          datasets: [
            {
              label: "Suhu (°C)",
              data: [],
              borderColor: "rgba(255, 99, 132, 1)",
              backgroundColor: "rgba(255, 99, 132, 0.2)",
              fill: true,
              tension: 0.1,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            x: { title: { display: true, text: "Waktu (s)" } },
            y: {
              title: { display: true, text: "Suhu (°C)" },
              min: 0,
              max: 100,
            },
          },
        },
      });

      // Inisialisasi Chart.js untuk kelembapan
      const ctxHumidity = document
        .getElementById("humidityChart")
        .getContext("2d");
      const humidityChart = new Chart(ctxHumidity, {
        type: "line",
        data: {
          labels: [],
          datasets: [
            {
              label: "Kelembapan (%)",
              data: [],
              borderColor: "rgba(54, 162, 235, 1)",
              backgroundColor: "rgba(54, 162, 235, 0.2)",
              fill: true,
              tension: 0.1,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            x: { title: { display: true, text: "Waktu (s)" } },
            y: {
              title: { display: true, text: "Kelembapan (%)" },
              min: 0,
              max: 100,
            },
          },
        },
      });

      // WebSocket connection
      let websocket = new WebSocket("ws://192.168.100.159:8765");

      // Fungsi untuk memperbarui grafik
      function updateCharts(data) {
        const time = new Date().toLocaleTimeString();

        // Update suhu
        if (temperatureChart.data.labels.length > 20) {
          temperatureChart.data.labels.shift();
          temperatureChart.data.datasets[0].data.shift();
        }
        temperatureChart.data.labels.push(time);
        temperatureChart.data.datasets[0].data.push(data.temperature);
        temperatureChart.update();

        // Update kelembapan
        if (humidityChart.data.labels.length > 20) {
          humidityChart.data.labels.shift();
          humidityChart.data.datasets[0].data.shift();
        }
        humidityChart.data.labels.push(time);
        humidityChart.data.datasets[0].data.push(data.humidity);
        humidityChart.update();
      }

      // Handle pesan WebSocket
      websocket.onmessage = function (event) {
        let data = JSON.parse(event.data);
        document.getElementById("suhu").textContent = data.temperature;
        document.getElementById("kelembapan").textContent = data.humidity;
        document.getElementById("fan1_status").textContent = data.fan1_status
          ? "ON"
          : "OFF";
        document.getElementById("fan2_status").textContent = data.fan2_status
          ? "ON"
          : "OFF";

        // Update grafik
        updateCharts(data);
      };

      // Fungsi toggle relay
      function setupToggle(buttonId, relayName) {
        const button = document.getElementById(buttonId);
        const icon = button.querySelector("i");
        let isOn = false;

        button.addEventListener("click", function () {
          isOn = !isOn;
          button.classList.toggle("button-clicked", isOn);
          icon.classList.toggle("icon-clicked", isOn);

          let message = {};
          message[relayName] = isOn ? 1 : 0;
          websocket.send(JSON.stringify(message));
        });
      }

      setupToggle("relay_a_toggle", "relay_a");
      setupToggle("relay_b_toggle", "relay_b");
      setupToggle("relay_c_toggle", "relay_c");
      setupToggle("relay_d_toggle", "relay_d");

      function openmenu() {
        document.getElementById("submenu").style.right = "0";
      }

      function closemenu() {
        document.getElementById("submenu").style.right = "-200px";
      }
    </script>
    <script>
      var mainlinks = document.getElementsByClassName("mainlinks");
      var content = document.getElementsByClassName("content");

      function opentab(tabname) {
        // Looping through mainlinks elements
        Array.from(mainlinks).forEach((link) => {
          link.classList.remove("active");
        });

        // Looping through content elements
        Array.from(content).forEach((item) => {
          item.classList.remove("active");
        });

        // Add 'active' class to the clicked/current element
        event.currentTarget.classList.add("active");
        document.getElementById(tabname).classList.add("active");
      }

      var sidemeu = document.getElementById("submenu");
      function openmenu() {
        sidemeu.style.right = "0";
      }
      function closemenu() {
        sidemeu.style.right = "-200px";
      }

      document.addEventListener("DOMContentLoaded", function () {
        const scriptURL =
          "https://script.google.com/macros/s/AKfycbzrY5wjcnrtxtTeXmsvGzOG6AQ0J54UA5zWBfhgDuv9AiDaieC7rp-UntFS_3_g0XFwLQ/exec";
        const form = document.forms["submit-to-google-sheet"];
        const msg = document.getElementById("msg");
        const modal = new bootstrap.Modal(
          document.getElementById("exampleModal")
        );

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          fetch(scriptURL, { method: "POST", body: new FormData(form) })
            .then((response) => {
              msg.innerHTML = "Message sent successfully";
              form.reset();
              // Show the modal when the message is sent successfully
              modal.show();
              setTimeout(function () {
                msg.innerHTML = "";
              }, 5000);
            })
            .catch((error) => console.error("Error!", error.message));
        });
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
